#!/usr/bin/env bash

set -e 

BP_DIR="$(cd "$(dirname "$0")" && pwd)"
BUILD_DIR=$1
CACHE_DIR=$2
OPT_DIR=$BP_DIR/../opt/
PROFILED_DIR=$BUILD_DIR/.profile.d



export GOHOME=$BUILD_DIR/.gohome
export GOROOT=$GOHOME/go
export PATH=$PATH:$GOROOT/bin

mkdir -p $GOROOT/bin
cd $GOHOME

curl -O  https://storage.googleapis.com/golang/go1.8.3.linux-amd64.tar.gz
tar -xvf go1.8.3.linux-amd64.tar.gz

mkdir -p $PROFILED_DIR

cat <<EOF > ${PROFILED_DIR}/golang.sh
#!/bin/bash
set -e
export GOHOME=$HOME/.gohome
export GOROOT=$GOHOME/go
export PATH=$PATH:$GOROOT/bin
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin
echo $GOROOT
echo $GOPATH
echo $PATH
EOF

chmod +x ${PROFILED_DIR}/golang.sh

echo "-----> Installed GoLang1.8.3"




